local armies = {
	{
		["playable_faction"] =	"wh3_main_ksl_the_ice_court",
		["enemy_faction"] =		"wh3_dlc20_nor_dolgan",
		["x_pos"] = 			432,
		["y_pos"] = 			122,
		["units"] = 			false,
		["general_subtype"] =	false
	},
	{
		["playable_faction"] =	"wh3_main_ksl_the_great_orthodoxy",
		["enemy_faction"] =		"wh3_main_ksl_ungol_kindred",
		["x_pos"] = 			248,
		["y_pos"] = 			196,
		["units"] = 			"wh3_main_ksl_inf_kossars_0,wh3_main_ksl_inf_kossars_0,wh3_main_ksl_cav_horse_raiders_0",
		["general_subtype"] =	"wh3_main_ksl_boyar"
	},
	{
		["playable_faction"] =	"wh3_main_ksl_ursun_revivalists",
		["enemy_faction"] =		"wh3_main_grn_dark_land_orcs",
		["x_pos"] = 			738,
		["y_pos"] = 			224,
		["units"] = 			"wh_main_grn_inf_goblin_spearmen,wh_main_grn_inf_goblin_spearmen,wh_main_grn_inf_goblin_archers",
		["general_subtype"] =	"wh_main_grn_orc_warboss"
	},
	{
		["playable_faction"] =	"wh3_main_ogr_goldtooth",
		["enemy_faction"] =		"wh3_main_ogr_crossed_clubs",
		["x_pos"] = 			960,
		["y_pos"] = 			265,
		["units"] = 			false,
		["general_subtype"] =	false
	},
	{
		["playable_faction"] =	"wh3_main_ogr_disciples_of_the_maw",
		["enemy_faction"] =		"wh_main_dwf_karak_ziflin",
		["x_pos"] = 			143,
		["y_pos"] = 			15,
		["units"] = 			"wh_main_dwf_inf_dwarf_warrior_0,wh_main_dwf_inf_dwarf_warrior_0,wh_main_dwf_inf_miners_0",
		["general_subtype"] =	"wh_main_dwf_lord"
	},
	{
		["playable_faction"] =	"wh3_main_kho_exiles_of_khorne",
		["enemy_faction"] =		"wh3_main_chs_gharhar",
		["x_pos"] = 			290,
		["y_pos"] = 			448,
		["units"] = 			"wh_main_chs_inf_chaos_marauders_0,wh_main_chs_inf_chaos_marauders_0,wh_main_chs_inf_chaos_marauders_0,wh_main_chs_cav_marauder_horsemen_0",
		["general_subtype"] =	"wh_main_chs_lord"
	},
	{
		["playable_faction"] =	"wh3_main_nur_poxmakers_of_nurgle",
		["enemy_faction"] =		"wh3_main_ogr_fleshgreeders",
		["x_pos"] = 			594,
		["y_pos"] = 			355,
		["units"] = 			"wh3_main_ogr_inf_ogres_0,wh3_main_ogr_inf_gnoblars_0",
		["general_subtype"] =	"wh3_main_ogr_tyrant"
	},
	{
		["playable_faction"] =	"wh3_main_tze_oracles_of_tzeentch",
		["enemy_faction"] =		"wh3_main_cth_imperial_wardens",
		["x_pos"] = 			810,
		["y_pos"] = 			498,
		["units"] = 			"wh3_main_cth_inf_peasant_spearmen_1,wh3_main_cth_inf_peasant_spearmen_1,wh3_main_cth_inf_peasant_archers_0",
		["general_subtype"] =	"wh3_main_cth_lord_magistrate_yang"
	},
	{
		["playable_faction"] =	"wh3_main_sla_seducers_of_slaanesh",
		["enemy_faction"] =		"wh3_main_kho_bloody_sword",
		["x_pos"] = 			123,
		["y_pos"] = 			574,
		["units"] = 			"wh3_main_kho_inf_bloodletters_0,wh3_main_kho_inf_bloodletters_0,wh3_main_kho_inf_chaos_warhounds_0",
		["general_subtype"] =	"wh3_main_kho_herald_of_khorne"
	},
	{
		["playable_faction"] =	"wh3_main_cth_the_northern_provinces",
		["enemy_faction"] =		"wh3_main_cth_rebel_lords_of_nan_yang",
		["x_pos"] = 			900,
		["y_pos"] = 			539,
		["units"] = 			"wh3_main_cth_inf_peasant_spearmen_1,wh3_main_cth_inf_peasant_spearmen_1,wh3_main_cth_inf_peasant_archers_0",
		["general_subtype"] =	"wh3_main_cth_lord_magistrate_yang"
	},
	{
		["playable_faction"] =	"wh3_main_cth_the_western_provinces",
		["enemy_faction"] =		"wh2_main_skv_clan_eshin",
		["x_pos"] = 			1004,
		["y_pos"] = 			436,
		["units"] = 			"wh2_main_skv_inf_skavenslaves_0,wh2_main_skv_inf_skavenslaves_0,wh2_main_skv_inf_clanrats_0,wh2_main_skv_inf_clanrats_0,wh2_main_skv_inf_clanrats_1",
		["general_subtype"] =	"wh2_main_skv_warlord"
	},
	{
		["playable_faction"] =	"wh3_main_dae_daemon_prince",
		["enemy_faction"] =		"wh_main_emp_nordland",
		["x_pos"] = 			171,
		["y_pos"] = 			312,
		["units"] = 			"wh_main_emp_inf_spearmen_0,wh_main_emp_inf_spearmen_0,wh2_dlc13_emp_inf_archers_0",
		["general_subtype"] =	"wh_main_emp_lord"
	},
	{
		["playable_faction"] =	"wh3_dlc20_chs_azazel",
		["enemy_faction"] =		"wh3_dlc20_nor_kuj",
		["x_pos"] = 			false,
		["y_pos"] = 			false,
		["units"] = 			false,
		["general_subtype"] =	false
	},
	{
		["playable_faction"] =	"wh3_dlc20_chs_festus",
		["enemy_faction"] =		"wh_dlc08_nor_vanaheimlings",
		["x_pos"] = 			false,
		["y_pos"] = 			false,
		["units"] = 			false,
		["general_subtype"] =	false
	},	
	{
		["playable_faction"] =	"wh3_dlc20_chs_valkia",
		["enemy_faction"] =		"wh_dlc08_nor_goromadny_tribe",
		["x_pos"] = 			false,
		["y_pos"] = 			false,
		["units"] = 			false,
		["general_subtype"] =	false
	},
	{
		["playable_faction"] =	"wh3_dlc20_chs_vilitch",
		["enemy_faction"] =		"wh_main_nor_sarl",
		["x_pos"] = 			false,
		["y_pos"] = 			false,
		["units"] = 			false,
		["general_subtype"] =	false
	}
};

function create_starting_armies()
	for i = 1, #armies do
		local current_army = armies[i];
		local current_playable_faction_key = current_army.playable_faction;
		local current_playable_faction = cm:get_faction(current_playable_faction_key);
		
		local current_enemy_faction_key = current_army.enemy_faction;
		local current_enemy_faction = cm:get_faction(current_enemy_faction_key);
		
		if not current_playable_faction then
			script_error("create_starting_armies() called, but could not find playable faction [" .. current_playable_faction_key.. "]");
			return;
		end;
		
		if not current_enemy_faction then
			script_error("create_starting_armies() called, but could not find enemy faction [" .. current_enemy_faction_key.. "]");
			return;
		end;
		
		if not current_playable_faction:at_war_with(current_enemy_faction) then
			script_error("create_starting_armies() called, but playable faction [" .. current_playable_faction_key .. "] is not at war with enemy faction [" .. current_enemy_faction_key .. "]");
			return;
		end;
		
		if current_playable_faction:is_human() then
			if current_army.general_subtype then
				cm:create_force_with_general(
					current_enemy_faction_key,
					current_army.units,
					"wh3_main_chaos_region_kislev",
					current_army.x_pos,
					current_army.y_pos,
					"general",
					current_army.general_subtype,
					"",
					"",
					"",
					"",
					false,
					function(char_cqi, mf_cqi)
						cm:apply_effect_bundle_to_characters_force("wh3_main_bundle_military_upkeep_free_force_no_movement", char_cqi, 0);
						cm:set_force_has_retreated_this_turn(cm:get_military_force_by_cqi(mf_cqi));
					end
				);
			else
				local faction_leader = current_enemy_faction:faction_leader();
				if not faction_leader:is_null_interface() and faction_leader:has_military_force() then
					local char_str = cm:char_lookup_str(faction_leader);
					--skip teleport if not required
					if (current_army.x_pos and current_army.y_pos) then
						cm:teleport_to(char_str, current_army.x_pos, current_army.y_pos);
					end
					cm:set_force_has_retreated_this_turn(cm:get_military_force_by_cqi(faction_leader:military_force():command_queue_index()));
				end
			end;
		end;
	end;
end;